# 验证码爆破工具 (Captcha Brute Force Tool)

**作者**: Testin007

这是一个基于 GUI 的图形化验证码爆破工具，旨在帮助安全测试人员在进行渗透测试时，自动识别并绕过带有验证码的登录界面。

## 核心致谢

本项目核心验证码识别功能由 **[ddddocr](https://github.com/sml2h3/ddddocr)** 强力驱动。
特别感谢 `ddddocr` 开源项目提供的优秀、开箱即用的通用验证码识别模型，使得本工具能够轻松处理多种类型的数字字母验证码。

## 功能特性

- **图形化界面**：基于 Tkinter 开发，操作简单直观，全中文界面。
- **验证码自动识别**：
  - 集成 `ddddocr`，支持常规字母数字验证码。
  - **算术模式**：支持自动计算简单的加减乘除验证码（如 `1+2`, `8*4`），需勾选“启用算术模式”。
  - **智能会话管理**：自动剥离 Cookie，通过 Session 维持验证码有效性。
- **灵活的攻击配置**：
  - 支持直接粘贴 Burp Suite 等工具抓取的原始 HTTP 请求包。
  - **参数配置**：支持“固定值”、“字典文件”、“验证码”三种参数模式。
  - **字典支持**：兼容 UTF-8 和 GBK 编码的字典文件，自动处理中文路径。
- **重试机制**：可配置验证码错误时的重试关键字和最大重试次数，提高爆破成功率。
- **结果可视化**：实时显示请求状态、长度、结果及重试情况，支持查看详细的请求/响应报文。

## 使用教程

### 1. 运行程序
- **直接运行**：解压发布的 ZIP 包，进入文件夹双击 `CaptchaBruteForce.exe` 即可。
- **源码运行**：
  ```bash
  pip install -r requirements.txt
  python gui_brute_force.py
  ```

### 2. 配置验证码 (Tab 1)
1.  **抓包**：使用 Burp Suite 抓取获取验证码图片的 HTTP 请求。
2.  **粘贴**：将原始请求包粘贴到“在此粘贴验证码请求包”区域。
3.  **测试**：点击“测试获取并识别”。
    - 下方预览区应显示出验证码图片和识别结果。
    - **注意**：如果是算术题（如图片显示 `2+3=?`），请勾选右下角的 **“启用算术模式”**。

### 3. 配置攻击 (Tab 2)
1.  **抓包**：抓取登录接口的 HTTP 请求（包含账号、密码、验证码字段）。
2.  **粘贴**：将请求包粘贴到“在此粘贴登录/攻击请求包”区域。
3.  **解析**：点击“解析参数”，右侧会自动列出 Body 中的参数。
4.  **配置参数**：
    - **账号/密码**：根据需求选择“Fixed”（固定值）或“Dictionary”（字典文件）。如果是字典，点击 `...` 选择 TXT 文件。
    - **验证码字段**：将验证码对应的参数（如 `captcha`或`code`）的模式选为 **“Captcha”**。此时输入框会禁用，程序会自动填入识别结果。
    - **payload组合**：当前为笛卡尔积模式
5.  **配置重试**：
    - **重试关键字**：输入登录失败时服务器返回的提示（如“验证码错误”）。当响应中包含此关键字时，程序会自动刷新验证码并重试。

### 4. 开始爆破 (Tab 3)
1.  切换到“3. 运行与结果”标签页。
2.  点击 **“开始攻击”**。
3.  观察列表中的结果。点击列表项，可在下方查看具体的请求和响应详情。

## 注意事项

1.  **不要移动 EXE 文件**：请务必保持 `CaptchaBruteForce.exe` 在解压后的文件夹内运行，**不要**将其单独拖拽到桌面或其他位置，否则会因缺少 `_internal` 依赖文件而无法启动。如需桌面快捷方式，请使用“右键 -> 发送 -> 桌面快捷方式”。
2.  **字典编码**：工具已自动兼容 UTF-8 和 GBK 编码的字典文件，但建议字典文件中不要包含过于特殊的不可见字符。
3.  **代理设置**：程序启动时会自动清除系统环境变量中的代理设置（`HTTP_PROXY` 等），以防止本地代理软件导致请求失败。如果需要通过代理抓包，请自行修改源码中的 session 配置。
4.  **算术验证码**：目前的算术模式主要针对个位数的简单运算（X op Y），对于复杂的公式可能需要定制开发。

## 免责声明

本工具仅供安全测试人员在授权范围内进行合法的渗透测试使用。请勿用于未授权的非法攻击，作者不承担任何因使用本工具而导致的法律责任。
